<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!-- viewport修正 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>X-Power 遂に公開！</title>

<link rel="stylesheet" href="../images/style.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MNGMJG42PP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MNGMJG42PP');
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WP6GQ5JL');</script>
<!-- End Google Tag Manager -->

</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WP6GQ5JL"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <canvas id="organic-line"></canvas>


 <header role="banner" class="header">
                            <div class="header-wrap">
  <h1 class="header-siteid">
    <img src="../images/header_logo.png" alt="X-POWER -四次元肉体進化-">
  </h1>
  <p class="header-catch"><img src="../images/header_catch.png" alt="封印を解き放て！"></p>
</div>
                    </header>
<div id="content">

      <!--div class="caption">パート2</div>
  <div id="left">
    <div class="image">
      <img src="./files/thumb.png" alt="part2">
        </div>

    <div class="list">
- ケニアの女性を妊娠させる方法<br>
- 頭が悪くなる本当の理由<br>
- 必ず失明する食べ物<br>
- 身長が3センチ伸びる食べ物<br>
- 野菜を妊娠させる方法<br>
- 奇形児が生まれる原因<br>
- 不老不死への道<br>
- Ｏ脚のネコ<br>
- エイズを予防する香水<br>
- 神様のフリをする方法<br>
- 癌を治す最後の方法<br>
- ロシア人の本当の秘密<br>
    </div>

      <br>
  </div-->

  <div id="right">

<div class="step1box">
        <div class="step">Step 1：寿命を10%伸ばす法を聴く</div>

<div class="arrow" style="display: block!important;padding-top: 30px;padding-bottom: 0px;">
      <img src="../images/audio_arrow6.png" width="50px">
</div>

<div class="playbtn" style="padding-top: 0px;padding-bottom: 20px;">
          <img id="ui1" src="../images/video_play.png" />
</div>
        <audio id="audio1" preload="metadata" style="display: block;">
          <source src="https://xcapitalism.com/XPower/4/files/xpower4.mp3" type="audio/mp3" />
          <p>この音声はHTML5プレイヤーで再生されます。<br />
          最新版の<a href="https://www.google.co.jp/chrome/browser/desktop/" target="_blank">GoogleCrome</a>、
          <a href="https://www.mozilla.org/ja/firefox/new/" target="_blank">Firefox</a>などをご利用ください。</p>
        </audio>
    <!-- / Audio -->


    <div id="download">
      <div class="download">
      <a href="https://xcapitalism.com/XPower/4/files/xpower4.mp3" target="_blank">右クリックで音声を保存</a>
    </div>
  </div>


  </div>


<div class="step2box">
        <div class="step2">Step 2：仙人さんにお願いをする</div>


            <!-- FORM REPEAT -->
            <div>
                <form id="submission-form-2" class="mirai-form light-mode-form" action="https://x-sennin.com/api/register/tagandmail.php" method="POST">
                     <!-- Config fields -->
                    <input type="hidden" name="tag_id" value="14032264">
                    <input type="hidden" name="form_id" value="xpower-promo-4">
                    
                    <div class="form-group">
                        <label for="name-2">名前: <span class="required">*</span></label>
                        <input type="text" id="name-2" name="name" placeholder="お名前" required>
                    </div>

                    <div class="form-group">
                        <label for="email-2">メルアド: <span class="required">*</span></label>
                        <input type="email" id="email-2" name="email" placeholder="メールアドレス" required>
                    <div class="email-suggestion" style="color:#d9534f; font-size:0.9em; margin-top:5px;"></div>
                    </div>


                    <div class="form-group">
                        <label for="message-2">感想: <span class="required">*</span></label>
                        <textarea id="message-2" name="message" rows="8" placeholder="感想を記入" required></textarea>
                    </div>

                    <button type="submit" class="submit-btn">
                        <span class="btn-text">送信</span>
                        <span class="btn-loader"></span>
                    </button>

                    <!-- Success Message Container -->
                    <div class="success-message" style="display:none; text-align:center; padding:20px;">
                        <p class="strong">ありがとうございます。<br>送信が完了しました。</p>
                    </div>
                </form>
            </div>

<div class="section-divider light"></div>

</div>


    <div id="sidebar">
        <p style="text-align:left;padding-bottom: 30px;">バックナンバー</p>
      <ul class="playlist">
        <li class="none"><a href="../1/" target="_blank">
          <!--span class="title">パート１：シドニー事件の全貌</span-->
          <span class="thumb"><img src="../images/thumb1.png" width="210px" /></span>
        </a></li>
        <li class="none"><a href="../2/" target="_blank">
          <span class="thumb"><img src="../images/thumb2.png" width="210px" /></span>
        </a></li>
        <li class="none"><a href="../3/" target="_blank">
          <span class="thumb"><img src="../images/thumb3.png" width="210px" /></span>
        </a></li>


      </ul>
    </div>


</div>
</div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-links">
            <a href="https://xtribe.me/5paths/tokusho.html" target="_blank">特商法</a> 　　 
            <a href="https://xtribe.me/5paths/privacy.html" target="_blank">プライバシーポリシー</a>
        </div>
    </footer>




    <!-- SCRIPTS -->
    <script src="../images/app-organicline.js" defer></script>
    <script>
    // Form Submission Logic (Vanilla JS to handle JSON response from PHP)
    document.addEventListener('DOMContentLoaded', () => {
        const forms = document.querySelectorAll('form.mirai-form');

        forms.forEach(form => {
            form.addEventListener('submit', function(e) {
                e.preventDefault();

                const submitBtn = form.querySelector('button[type="submit"]');
                const btnText = submitBtn.querySelector('.btn-text');
                const btnLoader = submitBtn.querySelector('.btn-loader');
                const successMessage = form.querySelector('.success-message');
                const formGroups = form.querySelectorAll('.form-group');

                // Loading State
                submitBtn.disabled = true;
                btnText.style.opacity = '0';
                btnLoader.style.display = 'block';

                const formData = new FormData(form);

                // ▼▼▼ 追加 ▼▼▼
                formData.append('_page_url', window.location.href);

                fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                })
                .then(response => {
                    // Note: tagandmail.php might return JSON directly
                    return response.json().catch(() => {
                        // Fallback if response isn't valid JSON (rare but possible with PHP errors)
                        return { success: false, message: '通信エラーが発生しました' };
                    });
                })
                .then(data => {
                    if (data.success) {
                        // Success Animation
                        formGroups.forEach(group => group.style.display = 'none');
                        submitBtn.style.display = 'none';
                        successMessage.style.display = 'block';
                    } else {
                        alert('エラー: ' + (data.message || '送信に失敗しました'));
                        resetButton();
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('通信エラーが発生しました。');
                    resetButton();
                });

                function resetButton() {
                    submitBtn.disabled = false;
                    btnText.style.opacity = '1';
                    btnLoader.style.display = 'none';
                }
            });
        });
    });
    </script>


<!-- タイプミスチェックライブラリ -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mailcheck/1.1.1/mailcheck.min.js"></script>

<script>
// Mailcheck機能（複数フォーム対応版）
$(document).ready(function() {
    // name="email" を持つすべてのinput要素を対象にする
    const emailInputs = $('input[name="email"]');

    // ドメインの定義（日本でよく使われるものも含める）
    const domains = ['gmail.com', 'yahoo.co.jp', 'icloud.com', 'outlook.jp', 'outlook.com', 'hotmail.com', 'softbank.ne.jp', 'docomo.ne.jp', 'ezweb.ne.jp'];

    emailInputs.on('blur', function() {
        const $currentInput = $(this); // 操作中の入力欄
        // その入力欄のすぐ下にある suggestion ボックスを探す
        const $suggestionBox = $currentInput.next('.email-suggestion');

        // 前回の提案をクリア
        $suggestionBox.empty();

        // Mailcheckを実行
        $currentInput.mailcheck({
            domains: domains, // 上で定義したドメインを使用
            suggested: function(element, suggestion) {
                // 提案があった場合の処理
                const correctedEmail = suggestion.full;
                
                // 提案メッセージを構築
                // クリックしやすいように装飾を追加
                const message = `もしかして： <span class="correction-link" 
                                style="font-weight: bold; cursor: pointer; text-decoration: underline;" 
                                data-suggested-email="${correctedEmail}">
                                ${correctedEmail}</span> ですか？`;
                
                $suggestionBox.html(message);
            },
            empty: function(element) {
                // 提案がなかった場合
                $suggestionBox.empty();
            }
        });
    });

    // 提案されたメールアドレスをクリックした時の処理
    // （動的に追加された要素なので、documentに対してイベント委譲を行う）
    $(document).on('click', '.correction-link', function() {
        const $link = $(this);
        const correctedEmail = $link.data('suggested-email');
        
        // クリックされたリンクが含まれる suggestion ボックスを探す
        const $box = $link.closest('.email-suggestion');
        // そのボックスの直前にある input 要素を探す
        const $targetInput = $box.prev('input[name="email"]');

        // 値を修正
        $targetInput.val(correctedEmail);
        
        // メッセージを消去してフォーカスを戻す
        $box.empty();
        $targetInput.focus();
    });
});
</script>
<script src="main.js"></script>

</body>
</html>